@model SameCategoryViewModel

@{
    ViewData["Title"] = "ViewProduct";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<header class="bg-faded p-1">
    <h3 class="text-center" style="color:#d46d15">
        @Model.Product.Name
    </h3>
</header>
<div class="row" style="margin-top:20px;">
    <div class="col-md-6">
        <section class="card m-1 p-1 item-image">
            @if (Model.ViewImage.Image == null)
            {
                <img class="group image list-group-image" src="http://placehold.it/400x250/000/fff" alt="" />
            }
            else
            {
                <img class="image" src="data:@Model.ViewImage.ContentType;base64,@Model.ViewImage.Image" width="400">
            }
            <div class="item-overlay">
                <div class="item-description">
                    <h3>Description</h3>
                    <p>@Model.Product.Description</p>
                </div>
            </div>
        </section>
        

    </div>
    <div class="col-md-3 product-info">
        <div><h3>Price:<span style="color:#d46d15; font-size: 31px;">@Model.Product.Price.ToString("C2")</span> </h3></div>
        <div>
            <form asp-controller="Cart" asp-action="AddToCart" asp-route-ProductId="@Model.Product.ProductId" asp-route-returnUrl="@ViewContext.HttpContext.Request.Path.ToString()" method="post">
                <input type="hidden" name="productId" value=@Model.Product.ProductId>
                @if (Model.Product.Stock <= 0)
                {
                    <h5 class="text-danger">Currently out of stock</h5>
                }
                else
                {
                        <span style="font-size:23px">Quantity</span>
                        <input type="number" name="quantity" min="1" max="@Model.Product.Stock" /><br>
                        <p style="color:darkgreen">Available: @Model.Product.Stock (items)</p>

                }

            </form>
        </div>
        
        <div>
            @if (Model.Product.Stock > 0)
        {
            <button class="btn btn-primary" type="submit">Add To Cart</button>
    }
            <button class="btn btn-primary" type="submit">Add To Wish List</button>
            <!--<a class="btn btn-success btn-sm" style="float:right" asp-controller="Cart" asp-action="AddToCart" asp-route-ProductID="@Model.Product.ProductId" asp-route-returnUrl="@ViewContext.HttpContext.Request.Path.ToString()">Add to cart</a>-->
        </div>
    </div>
    <div class="col-md-3"></div>
    </div>
    <br />
    <div class="row">
        @{ int count = 0;
            @foreach (var product in Model.SimilarViewImage)
            {
                @if (count <= 2 && product.Name != Model.Product.Name)
                {
                    <div class="col-md-2">
                        <section class="card m-1 p-1">
                            <header class="bg-faded p-1">
                                <h4>
                                    <a asp-area="" asp-controller="Client" asp-action="ViewProduct" asp-route-productId="@product.ProductId">@product.Name</a>
                                        <span class="badge" style="background-color:black">
                                            <small><b style="color:orangered">@product.Price.ToString("c")</b></small>
                                        </span>
                                </h4>
                            </header>
                            <section class="card m-1 p-1">
                                @if (product.Image == null)
                            {
                            <a asp-area="" asp-controller="Client" asp-action="ViewProduct" asp-route-productId="@product.ProductId">
                                <img class="group list-group-image" src="http://placehold.it/400x250/000/fff" alt="" />
                            </a>
                            }
                            else
                            {
                            <a asp-area="" asp-controller="Client" asp-action="ViewProduct" asp-route-productId="@product.ProductId">
                                <img class="group list-group-image" src="data:@product.ContentType;base64,@product.Image" style="width: 200px;" alt="" /></a>
                                }
                            </section>
                        </section>
                    </div>
                    count += 1;
                }
            }
        }
    </div>


